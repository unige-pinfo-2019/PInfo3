{"remainingRequest":"/home/gibran/Documents/projetInfo/PInfo3/web-ui/node_modules/babel-loader/lib/index.js!/home/gibran/Documents/projetInfo/PInfo3/web-ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/gibran/Documents/projetInfo/PInfo3/web-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/gibran/Documents/projetInfo/PInfo3/web-ui/src/views/NewAd.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/gibran/Documents/projetInfo/PInfo3/web-ui/src/views/NewAd.vue","mtime":1558980126883},{"path":"/home/gibran/Documents/projetInfo/PInfo3/web-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/gibran/Documents/projetInfo/PInfo3/web-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/gibran/Documents/projetInfo/PInfo3/web-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/gibran/Documents/projetInfo/PInfo3/web-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.string.link\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _Object$keys from \"/home/gibran/Documents/projetInfo/PInfo3/web-ui/node_modules/@babel/runtime-corejs2/core-js/object/keys\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nexport default {\n  name: 'new-ad',\n  data: function data() {\n    return {\n      title: '',\n      description: '',\n      price: 0.0,\n      // float\n      categoryID: 0,\n      selectedFile: null,\n      selectedFiles: [],\n      srcurl: null,\n      sending: false,\n      categories: [{\n        value: 1,\n        text: 'Vide'\n      }],\n      images: [] //[\"https://picsum.photos/600/300/?image=23\", \"https://picsum.photos/600/300/?image=24\", \"https://picsum.photos/600/300/?image=25\", \"https://picsum.photos/600/300/?image=25\", \"https://picsum.photos/600/300/?image=25\", \"https://picsum.photos/600/300/?image=26\"]\n\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    // retrieve categories\n    function getValues() {\n      return axios.get(process.env.VUE_APP_BASE_API + ':8081/categories/index').then(function (response) {\n        return response.data;\n      });\n    }\n\n    getValues().then(function (data) {\n      var listOfKeys = _Object$keys(data);\n\n      var formatedData = [];\n      listOfKeys.forEach(function (elem) {\n        var line = {\n          value: null,\n          text: null\n        };\n        line.text = elem;\n        line.value = data[elem];\n        formatedData.push(line);\n      });\n      _this.categories = formatedData;\n    });\n  },\n  methods: {\n    onFileChanged: function onFileChanged(event) {\n      this.selectedFile = event.target.files[0];\n      this.selectedFiles.push(event.target.files[0]);\n      var src = window.URL.createObjectURL(this.selectedFile);\n      this.images.push(src);\n    },\n    submit: function submit(event) {\n      var _this2 = this;\n\n      // `this` inside methods points to the Vue instance\n      // On upload l'image sur imgur\n      // Authentification\n      var config = {\n        headers: {\n          'Authorization': 'Client-ID a98be453a893668'\n        }\n      };\n      var self = this; // build the promises\n\n      var promises = [];\n\n      for (var i = 0; i < this.selectedFiles.length; i++) {\n        var tmp = new FormData();\n        tmp.append('image', this.selectedFiles[i]);\n        var prom = axios.post('https://api.imgur.com/3/image', tmp, config);\n        promises.push(prom);\n      } // execute the requests\n\n\n      axios.all(promises).then(axios.spread(function () {\n        var images = [];\n\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        for (var _i = 0; _i < args.length; _i++) {\n          console.log(args[_i].data.data.link);\n          images.push(args[_i].data.data.link);\n        } // upload ad\n\n\n        var data = {\n          \"title\": _this2.title,\n          \"description\": _this2.description,\n          \"price\": _this2.price,\n          \"categoryID\": _this2.categoryID,\n          \"userID\": 0,\n          \"images\": images\n        };\n        axios.post(process.env.VUE_APP_BASE_API + ':8081/classads', data).then(function (response) {\n          self.$router.push('/');\n        });\n      })).catch(function (error) {\n        alert(\"Ad has failed to upload, please try again\");\n      });\n      this.sending = true;\n    }\n  }\n};",{"version":3,"sources":["NewAd.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"new-ad\">\n    <div class=\"container\">\n      <div class=\"block\">\n\n        <span class=\"field-title\" > <h4>Titre</h4> <hr> </span>\n        <div class=\"input\">\n          <b-form-input v-model=\"title\"\n          id=\"input-1\"\n          type=\"email\"\n          required\n          placeholder=\"Entrez un titre\"\n          ></b-form-input>\n        </div>\n\n        <span class=\"field-title\" > <h4>Description</h4> <hr> </span>\n\n        <div class=\"input\">\n          <b-form-textarea v-model=\"description\"\n            id=\"textarea-auto-height\"\n            rows=\"6\"\n            max-rows=\"12\"\n            required\n            placeholder=\"Entrez une description\"\n          ></b-form-textarea>\n        </div>\n\n        <span class=\"field-title\" > <h4>Images</h4> <hr> </span>\n\n\n        <div class=\"images-wrapper\">\n          <div class=\"image-wrapper\" v-for=\"image in images\" v-bind:key=\"image.id\">\n\n            <b-img v-bind:src=\"image\" rounded width=\"100px\" height=\"100px\" v-img></b-img>\n\n            <div class=\"buttons-container star-container\">\n              <!-- <b-link class=\"delete-img\">X</b-link> -->\n              <font-awesome-icon style=\"color: #FFD700;\" :icon=\"['far', 'star']\"/>\n            </div>\n\n            <div class=\"buttons-container delete-container\">\n              <font-awesome-icon style=\"color: red; transform: translate(-3px, 5px) scale(1.3); float: right;\" icon=\"times\"/>\n            </div>\n\n          </div>\n          <b-button onclick=\"document.getElementById('hidden-file-input').click()\" class=\"new-photo\" variant=\"outline-primary\"> <font-awesome-icon style=\"font-size: 2em;\" icon=\"camera\"/> </b-button>\n\n\n          <!-- Cet input dessous est cliqué automatiquement lorsque le \"vrai\"\n          bouton visible est cliqué. -->\n          <input id=\"hidden-file-input\" type=\"file\" class=\"invisible-file-input\" @change=\"onFileChanged\">\n        </div>\n\n\n\n        <span class=\"field-title\" > <h4>Prix</h4> <hr> </span>\n\n        <b-input-group append=\"CHF\" style=\"width: 45%;\">\n          <b-form-input\n            id=\"price-field\"\n            v-model=\"price\"\n            required\n            type=\"number\"\n            placeholder=\"0.00\"\n\n          ></b-form-input>\n        </b-input-group>\n\n\n\n      </div>\n\n      <div class=\"block\">\n\n        <span class=\"field-title\" > <h4>Catégories</h4> <hr> </span>\n\n        <div class=\"input\">\n          <b-form-select v-model=\"categoryID\" :options=\"categories\" />\n        </div>\n\n      </div>\n\n      <div class=\"block submit-flex\">\n        <b-button style=\"float: right;\"  v-on:click=\"submit\" variant=\"primary\">Soumettre</b-button>\n      </div>\n    </div>\n\n\n    <b-modal id=\"sending-notification\" hide-header hide-footer centered v-model=\"sending\">\n      <div style=\"font-size: 1.7em;\">\n        Envoi en cours <b-spinner style=\"margin-left: 20px;\" label=\"Small Spinner\" variant=\"primary\"></b-spinner>\n      </div>\n    </b-modal>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  name: 'new-ad',\n  data() {\n    return {\n      title: '',\n      description: '',\n      price: 0.0, // float\n      categoryID: 0,\n      selectedFile: null,\n      selectedFiles : [],\n      srcurl:null,\n      sending: false,\n      categories: [\n        { value: 1, text: 'Vide' },\n      ],\n      images: []//[\"https://picsum.photos/600/300/?image=23\", \"https://picsum.photos/600/300/?image=24\", \"https://picsum.photos/600/300/?image=25\", \"https://picsum.photos/600/300/?image=25\", \"https://picsum.photos/600/300/?image=25\", \"https://picsum.photos/600/300/?image=26\"]\n    }\n  },\n  mounted: function () {\n    // retrieve categories\n    function getValues() {\n      return axios\n      .get(process.env.VUE_APP_BASE_API + ':8081/categories/index')\n      .then(response => {\n        return response.data;\n      })\n    }\n    getValues().then(data => {\n      var listOfKeys = Object.keys(data);\n      var formatedData = [];\n      listOfKeys.forEach(function(elem) {\n        var line = {value: null, text: null}\n        line.text = elem;\n        line.value = data[elem];\n        formatedData.push(line);\n      });\n      this.categories = formatedData;\n    })\n  },\n  methods: {\n    onFileChanged (event) {\n      this.selectedFile = event.target.files[0];\n      this.selectedFiles.push(event.target.files[0]);\n      var src = window.URL.createObjectURL(this.selectedFile);\n      this.images.push(src);\n\n    },\n\n    submit: function (event) {\n       // `this` inside methods points to the Vue instance\n       // On upload l'image sur imgur\n       // Authentification\n       var config = {\n         headers: {'Authorization': 'Client-ID a98be453a893668'}\n       };\n       var self = this;\n       // build the promises\n       var promises = [];\n       for (var i = 0; i < this.selectedFiles.length; i++) {\n         var tmp = new FormData();\n         tmp.append('image',this.selectedFiles[i]);\n         var prom = axios.post('https://api.imgur.com/3/image',tmp, config);\n         promises.push(prom);\n       }\n       // execute the requests\n       axios.all(promises)\n       .then(axios.spread((...args) => {\n         var images = [];\n         for (let i = 0; i < args.length; i++) {\n            console.log(args[i].data.data.link);\n            images.push(args[i].data.data.link);\n        }\n        // upload ad\n        var data = {\"title\" : this.title,\n                     \"description\": this.description,\n                     \"price\": this.price,\n                     \"categoryID\": this.categoryID,\n                     \"userID\":0,\n                     \"images\": images};\n         axios\n        .post(process.env.VUE_APP_BASE_API + ':8081/classads',data)\n        .then(function (response) {\n          self.$router.push('/');\n        });\n\n      }))\n      .catch(error => {\n        alert(\"Ad has failed to upload, please try again\");\n      });\n\n\n\n       this.sending = true;\n\n  }\n}\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang=\"scss\" scoped>\n\n\n\n.buttons-container {\n  // background: #CCC;\n  position: relative;\n  top: -100px;\n  padding: 2px 8px;\n}\n\n.invisible-file-input {\n  display: none;\n}\n\n.images-wrapper {\n  // display: inline-block;\n  // float: left;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  // justify-content: flex-start;\n  // align-items: flex-start;\n  text-align: left;\n\n}\n\n.image-wrapper {\n  margin-right: 20px;\n  margin-bottom: 20px;\n  // width: 50%;\n}\n\n.container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 50px;\n}\n\n.block {\n  width: 90%;\n  max-width: 800px;\n  background: white;\n  min-height: 100px;\n  border-radius: 3px;\n  border: 1px solid lightgrey;\n  padding: 20px 20px 20px 20px;\n  margin-bottom: 30px;\n\n  display: flex;\n  flex-direction: column;\n}\n\nh4 {\n  font-size: 1.3em;\n  margin-bottom: 0px;\n  font-weight: normal;\n  // font-family: 'Open Sans', sans-serif;\n}\n\n.field-title > hr {\n  border: 1px solid $primary-color;\n  margin: 0px 0px 5px 0px;\n  width: 100%;\n}\n\n.field-title {\n  // transform: translateX(-50px);\n\n  align-self: flex-start;\n\n  // color: white;\n  // background-color: $primary-color;\n  // padding: 3px 10px 5px 10px;\n  margin-bottom: 12px;\n\n  // box-shadow: 5px 5px 5px #AAA;\n\n  // width: 45%;\n  text-align: left;\n}\n\n.input {\n  margin-bottom: 40px;\n}\n\n.new-photo {\n  // float: left;\n  width: 100px;\n  height: 100px;\n  margin-bottom: 20px;\n}\n\n.submit-flex {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-end;\n}\n\n#price-field {\n  width: 45%;\n  align-self: flex-start;\n  height: 40px;\n  font-size: 1.1em;\n}\n\n</style>\n"],"sourceRoot":"src/views"}]}