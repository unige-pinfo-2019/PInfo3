{"remainingRequest":"/home/gibran/Documents/projetInfo/PInfo3/web-ui/node_modules/thread-loader/dist/cjs.js!/home/gibran/Documents/projetInfo/PInfo3/web-ui/node_modules/babel-loader/lib/index.js!/home/gibran/Documents/projetInfo/PInfo3/web-ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/gibran/Documents/projetInfo/PInfo3/web-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/gibran/Documents/projetInfo/PInfo3/web-ui/src/views/NewAd.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/gibran/Documents/projetInfo/PInfo3/web-ui/src/views/NewAd.vue","mtime":1558442769955},{"path":"/home/gibran/Documents/projetInfo/PInfo3/web-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/gibran/Documents/projetInfo/PInfo3/web-ui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/gibran/Documents/projetInfo/PInfo3/web-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/gibran/Documents/projetInfo/PInfo3/web-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/gibran/Documents/projetInfo/PInfo3/web-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.string.link\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _Object$keys from \"/home/gibran/Documents/projetInfo/PInfo3/web-ui/node_modules/@babel/runtime-corejs2/core-js/object/keys\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nexport default {\n  name: 'new-ad',\n  data: function data() {\n    return {\n      title: '',\n      description: '',\n      price: 0.0,\n      // float\n      categoryID: 0,\n      selectedFile: null,\n      categories: [{\n        value: 1,\n        text: 'Vide'\n      }],\n      images: [] //[\"https://picsum.photos/600/300/?image=23\", \"https://picsum.photos/600/300/?image=24\", \"https://picsum.photos/600/300/?image=25\", \"https://picsum.photos/600/300/?image=25\", \"https://picsum.photos/600/300/?image=25\", \"https://picsum.photos/600/300/?image=26\"]\n\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    // retrieve categories\n    function getValues() {\n      return axios.get('http://localhost:8081/categories/index').then(function (response) {\n        return response.data;\n      });\n    }\n\n    getValues().then(function (data) {\n      var listOfKeys = _Object$keys(data);\n\n      var formatedData = [];\n      listOfKeys.forEach(function (elem) {\n        var line = {\n          value: null,\n          text: null\n        };\n        line.text = elem;\n        line.value = data[elem];\n        formatedData.push(line);\n      });\n      _this.categories = formatedData;\n    });\n  },\n  methods: {\n    onFileChanged: function onFileChanged(event) {\n      this.selectedFile = event.target.files[0];\n      var src = window.URL.createObjectURL(this.selectedFile);\n      this.images.push(src);\n      console.log(this.images);\n    },\n    submit: function submit(event) {\n      // `this` inside methods points to the Vue instance\n      // On upload l'image sur imgur\n      // Authentification\n      var config = {\n        headers: {\n          'Authorization': 'Client-ID a98be453a893668'\n        }\n      }; // Data\n\n      var data = new FormData();\n      data.append(\"image\", this.selectedFile);\n      var dataad = {\n        \"title\": this.title,\n        \"description\": this.description,\n        \"price\": this.price,\n        \"categoryID\": this.categoryID,\n        \"userID\": 0,\n        \"images\": []\n      };\n      axios.post('https://api.imgur.com/3/image', data, config).then(function (response) {\n        var imglink = response.data.data.link; // setup image link\n\n        dataad[\"images\"] = [imglink]; // upload ad\n\n        axios.post('http://localhost:8081/classads', dataad);\n      }).catch(function (error) {\n        alert(\"Ad has failed to upload, please try again\");\n      }); // Success\n\n      this.$router.push('/');\n    }\n  }\n};",{"version":3,"sources":["NewAd.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"new-ad\">\n    <div class=\"container\">\n      <div class=\"block\">\n\n        <span class=\"field-title\" > <h4>Titre</h4> <hr> </span>\n        <div class=\"input\">\n          <b-form-input v-model=\"title\"\n          id=\"input-1\"\n          type=\"email\"\n          required\n          placeholder=\"Entrez un titre\"\n          ></b-form-input>\n        </div>\n\n        <span class=\"field-title\" > <h4>Description</h4> <hr> </span>\n\n        <div class=\"input\">\n          <b-form-textarea v-model=\"description\"\n            id=\"textarea-auto-height\"\n            rows=\"6\"\n            max-rows=\"12\"\n            required\n            placeholder=\"Entrez une description\"\n          ></b-form-textarea>\n        </div>\n\n        <span class=\"field-title\" > <h4>Images</h4> <hr> </span>\n\n        <!-- <div class=\"custom-file\">\n          <input type=\"file\" class=\"custom-file-input\" id=\"customFile\">\n          <label class=\"custom-file-label\" for=\"customFile\">Choose file</label>\n        </div> -->\n        <div class=\"images-wrapper\">\n          <div class=\"image-wrapper\" v-for=\"image in images\" v-bind:key=\"image.id\">\n            <b-img v-bind:src=\"image\" rounded width=\"100px\" height=\"100px\"></b-img>\n          </div>\n          <b-button onclick=\"document.getElementById('hidden-file-input').click()\" class=\"new-photo\" variant=\"outline-primary\"> <font-awesome-icon style=\"font-size: 2em;\" icon=\"camera\"/> </b-button>\n\n          <!-- Cet input dessous est cliqué automatiquement lorsque le \"vrai\"\n          bouton visible est cliqué. -->\n          <input id=\"hidden-file-input\" type=\"file\" class=\"invisible-file-input\" @change=\"onFileChanged\">\n        </div>\n\n\n        <span class=\"field-title\" > <h4>Prix</h4> <hr> </span>\n\n        <b-input-group append=\"CHF\" style=\"width: 45%;\">\n          <b-form-input\n            id=\"price-field\"\n            v-model=\"price\"\n            required\n            type=\"number\"\n            placeholder=\"0.00\"\n\n          ></b-form-input>\n        </b-input-group>\n\n\n\n      </div>\n\n      <div class=\"block\">\n\n        <span class=\"field-title\" > <h4>Catégories</h4> <hr> </span>\n\n        <div class=\"input\">\n          <b-form-select v-model=\"categoryID\" :options=\"categories\" />\n        </div>\n\n      </div>\n\n      <div class=\"block submit-flex\">\n        <b-button style=\"float: right;\"  v-on:click=\"submit\" variant=\"primary\">Soumettre</b-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  name: 'new-ad',\n  data() {\n    return {\n      title: '',\n      description: '',\n      price: 0.0, // float\n      categoryID: 0,\n      selectedFile: null,\n      categories: [\n        { value: 1, text: 'Vide' },\n      ],\n      images: []//[\"https://picsum.photos/600/300/?image=23\", \"https://picsum.photos/600/300/?image=24\", \"https://picsum.photos/600/300/?image=25\", \"https://picsum.photos/600/300/?image=25\", \"https://picsum.photos/600/300/?image=25\", \"https://picsum.photos/600/300/?image=26\"]\n    }\n  },\n  mounted: function () {\n    // retrieve categories\n    function getValues() {\n      return axios\n      .get('http://localhost:8081/categories/index')\n      .then(response => {\n        return response.data;\n      })\n    }\n    getValues().then(data => {\n      var listOfKeys = Object.keys(data);\n      var formatedData = [];\n      listOfKeys.forEach(function(elem) {\n        var line = {value: null, text: null}\n        line.text = elem;\n        line.value = data[elem];\n        formatedData.push(line);\n      });\n      this.categories = formatedData;\n    })\n  },\n  methods: {\n    onFileChanged (event) {\n      this.selectedFile = event.target.files[0]\n      var src = window.URL.createObjectURL(this.selectedFile);\n      this.images.push(src);\n      console.log(this.images);\n\n    },\n    submit: function (event) {\n       // `this` inside methods points to the Vue instance\n       // On upload l'image sur imgur\n       // Authentification\n       var config = {\n         headers: {'Authorization': 'Client-ID a98be453a893668'}\n       };\n       // Data\n       var data = new FormData();\n       data.append(\"image\", this.selectedFile);\n       var dataad = {\"title\" : this.title,\n                    \"description\": this.description,\n                    \"price\": this.price,\n                    \"categoryID\": this.categoryID,\n                    \"userID\":0,\n                    \"images\": []};\n       axios\n         .post('https://api.imgur.com/3/image',data, config)\n         .then(function (response) {\n           var imglink = response.data.data.link; // setup image link\n           dataad[\"images\"]=[imglink]\n           // upload ad\n              axios\n             .post('http://localhost:8081/classads',dataad)\n         })\n       .catch(error => {\n         alert(\"Ad has failed to upload, please try again\");\n       });\n       // Success\n       this.$router.push('/');\n  }\n}\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang=\"scss\" scoped>\n\n.invisible-file-input {\n  display: none;\n}\n\n.images-wrapper {\n  // display: inline-block;\n  // float: left;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  // justify-content: flex-start;\n  // align-items: flex-start;\n  text-align: left;\n\n}\n\n.image-wrapper {\n  margin-right: 20px;\n  margin-bottom: 20px;\n  // width: 50%;\n}\n\n.container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-top: 50px;\n}\n\n.block {\n  width: 90%;\n  max-width: 800px;\n  background: white;\n  min-height: 100px;\n  border-radius: 3px;\n  border: 1px solid lightgrey;\n  padding: 20px 20px 20px 20px;\n  margin-bottom: 30px;\n\n  display: flex;\n  flex-direction: column;\n}\n\nh4 {\n  font-size: 1.3em;\n  margin-bottom: 0px;\n  font-weight: normal;\n  // font-family: 'Open Sans', sans-serif;\n}\n\n.field-title > hr {\n  border: 1px solid $primary-color;\n  margin: 0px 0px 5px 0px;\n  width: 100%;\n}\n\n.field-title {\n  // transform: translateX(-50px);\n\n  align-self: flex-start;\n\n  // color: white;\n  // background-color: $primary-color;\n  // padding: 3px 10px 5px 10px;\n  margin-bottom: 12px;\n\n  // box-shadow: 5px 5px 5px #AAA;\n\n  // width: 45%;\n  text-align: left;\n}\n\n.input {\n  margin-bottom: 40px;\n}\n\n.new-photo {\n  // float: left;\n  width: 100px;\n  height: 100px;\n  margin-bottom: 20px;\n}\n\n.submit-flex {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-end;\n}\n\n#price-field {\n  width: 45%;\n  align-self: flex-start;\n  height: 40px;\n  font-size: 1.1em;\n}\n\n</style>\n"],"sourceRoot":"src/views"}]}